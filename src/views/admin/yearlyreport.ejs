<% layout('reportLayout') -%>
<% block('pageTitle', 'Yearly Sales Report') -%>
<% block('filterAction', '/admin/reports/yearly') -%>
<% block('downloadUrl', '/admin/reports/yearly/download') -%>

<% block('body') -%>
<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title mb-4">Yearly Sales Report</h4>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Order #</th>
                                <th>Date</th>
                                <th>Subtotal</th>
                                <th>Offer Discount</th>
                                <th>Coupon Discount</th>
                                <th>Total Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% orders.forEach(order => { %>
                            <tr>
                                <td><%= order.orderNumber %></td>
                                <td><%= new Date(order.createdAt).toLocaleDateString() %></td>
                                <td>$<%= order.subtotal.toFixed(2) %></td>
                                <td>$<%= order.offerDiscount.toFixed(2) %></td>
                                <td>$<%= order.couponDiscount.toFixed(2) %></td>
                                <td>$<%= order.orderAmount.toFixed(2) %></td>
                            </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
                <div class="mt-4">
                    <h5>Summary</h5>
                    <p>Total Orders: <%= summary.totalOrders %></p>
                    <p>Overall Subtotal: $<%= summary.overallSubtotal.toFixed(2) %></p>
                    <p>Overall Offer Discount: $<%= summary.overallOfferDiscount.toFixed(2) %></p>
                    <p>Overall Coupon Discount: $<%= summary.overallCouponDiscount.toFixed(2) %></p>
                    <p>Overall Sales Amount: $<%= summary.overallOrderAmount.toFixed(2) %></p>
                </div>
            </div>
        </div>
    </div>
</div>
<%- endblock %>